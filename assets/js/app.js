!function(){"use strict";function config($urlProvider,$locationProvider){$urlProvider.otherwise("/"),$locationProvider.html5Mode({enabled:!0,requireBase:!1})}function run(){FastClick.attach(document.body)}angular.module("application",["ui.router","ngAnimate","foundation","foundation.dynamicRouting","foundation.dynamicRouting.animations"]).config(config).run(run),config.$inject=["$urlRouterProvider","$locationProvider"]}();
"use strict";!function(){angular.module("application").factory("ApiService",["$q","$http",function($q,$http){var baseUrl="https://dev-frontserver.herokuapp.com",post=function(url,data){var deferred=$q.defer();return $http({url:baseUrl+url,method:"POST",data:data,headers:{"Content-Type":"application/json"}}).success(function(result){deferred.resolve(result)}).error(function(result,status){deferred.reject(status)}),deferred.promise};return{post:post,apiUrl:baseUrl}}])}();
"use strict";!function(){angular.module("application").factory("LoginService",["ApiService",function(ApiService){var saveAccessToken=function(accessToken){localStorage.accessToken=accessToken},signOut=function(){localStorage.removeItem("accessToken"),localStorage.removeItem("accountId")},getAccessToken=function(){return localStorage.getItem("accessToken")},sendLoginRequest=function(data){return ApiService.post("/api/login",data)},isLoggedIn=function(){return null!=getAccessToken()?!0:!1},saveAccountId=function(accountId){localStorage.accountId=accountId},getCurrentUserId=function(){return localStorage.accessToken&&localStorage.accountId?localStorage.accountId:null};return{sendLoginRequest:sendLoginRequest,saveAccessToken:saveAccessToken,signOut:signOut,getAccessToken:getAccessToken,isLoggedIn:isLoggedIn,saveAccountId:saveAccountId,getCurrentUserId:getCurrentUserId}}])}();
"use strict";!function(){angular.module("application").factory("ProfileService",["LoginService","ApiService",function(LoginService,ApiService){var getProfileById=function(userId){var data={accessToken:LoginService.getAccessToken(),id:userId};return ApiService.post("/personalHub/getProfileById",data)};return{getProfileById:getProfileById}}])}();
"use strict";!function(){angular.module("application").controller("LoginCtrl",["$scope","LoginService","$location","$rootScope","EventService",function($scope,LoginService,$location,$rootScope,EventService){LoginService.isLoggedIn()&&$location.path("/myProfile"),$scope.user={loginEmail:"brian.tobey123@gmail.com",loginPassword:"@ddinstagram",clientURI:"test",timeOffset:360,appId:"knotsillicon",IsValidationEnabled:!0,Errors:{Errors:{},IsValidationEnabled:!0}},$scope.loginNow=function(){LoginService.sendLoginRequest($scope.user).then(function(data){2==data.accountStatus&&(LoginService.saveAccessToken(data.userObj.accessToken),LoginService.saveAccountId(data.userObj.accountId),$rootScope.userData=data.userObj,EventService.trigger("signedIn"),EventService.trigger("updateProfilePicture",data.userObj),$location.path("/myProfile"))})}}])}();
"use strict";!function(){angular.module("application").controller("ProfileCtrl",["$scope","$stateParams","ProfileService","$state","LoginService","$location",function($scope,$stateParams,ProfileService,$state,LoginService,$location){LoginService.isLoggedIn()||$location.path("/"),$state.go("profile.personalSettings")}])}();
"use strict";!function(){angular.module("application").controller("PersonalSettingsCtrl",["$scope","ProfileService","$stateParams","$rootScope","ApiService","LoginService","$location",function($scope,ProfileService,$stateParams,$rootScope,ApiService,LoginService,$location){LoginService.isLoggedIn()||$location.path("/");var userId=LoginService.getCurrentUserId();ProfileService.getProfileById(userId).then(function(data){$scope.profileImage=ApiService.apiUrl+"/"+data.connData.imgSrc}),$scope.saveDate=function(){}}])}();
"use strict";!function(){angular.module("application").directive("profileImage",["$parse",function($parse){return{restrict:"A",template:' <div class="ten mobile-three columns"><img src="{{profileImage}}" ng-click="openFileBrowser()" class="profile-image"><input type="file" style="display: none" id="uploader" accept="image/*"></div>',link:function(scope,element,attrs){scope.openFileBrowser=function(){var imageFile=element[0].querySelector("#uploader");imageFile.click()};var imagePreview=function(imageFile){var fileReader=new FileReader;fileReader.onload=function(fileLoadedEvent){var srcData=fileLoadedEvent.target.result;scope.profileImage=srcData,scope.$apply()},fileReader.readAsDataURL(imageFile)},model=$parse(attrs.profileImage),modelSetter=model.assign,updateFile=function(){scope.$apply(function(){var imageFile=element[0].querySelector("#uploader").files[0];imageFile&&(modelSetter(scope,imageFile),imagePreview(imageFile))})};element.bind("change",updateFile)}}}])}();
"use strict";!function(){}(angular.module("application").controller("NavigationCtrl",["$scope","LoginService","FoundationActionSheet","EventService","$location","ApiService",function($scope,LoginService,FoundationActionSheet,EventService,$location,ApiService){$scope.isLoggedIn=LoginService.isLoggedIn(),EventService.on("signedIn",function(){$scope.isLoggedIn=LoginService.isLoggedIn()}),$scope.signOut=function(){LoginService.signOut(),$scope.isLoggedIn=!1,$location.path("/")},EventService.on("updateProfilePicture",function(event,userData){$scope.profilePicture=ApiService.apiUrl+"/"+userData.imgSrc,$scope.userName=userData.userName})}]));
"use strict";!function(){angular.module("application").controller("myProfileCtrl",["$scope","ProfileService","ApiService","LoginService","$location",function($scope,ProfileService,ApiService,LoginService){var userId=LoginService.getCurrentUserId();ProfileService.getProfileById(userId).then(function(data){$scope.myPhoto=ApiService.apiUrl+"/"+data.connData.imgSrc,$scope.myName=data.connData.firstName+" "+data.connData.lastName,$scope.myEmail=data.connData.email})}])}();
angular.module("application").service("EventService",["$rootScope",function($rootScope){this.trigger=function(name,args){$rootScope.$broadcast(name,args)},this.on=function(name,handler){$rootScope.$on(name,handler)}}]);